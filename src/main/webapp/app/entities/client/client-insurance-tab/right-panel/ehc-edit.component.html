<div class="modal-header"></div>
<br />
&nbsp;
<h5><span jhiTranslate="ermConsoleApp.ehc.myEhcInfo">WSIB INfo</span></h5>
<br />
<div class="form-group row">
  &nbsp;&nbsp;&nbsp;<label class="switch">
    <input class="largerCheckbox" type="checkbox" (change)="checkEditMode($event)" />
    <span class="slider round"></span> </label
  >&nbsp;
  <span jhiTranslate="ermConsoleApp.exercise.edit"></span>
</div>
<br />
<form name="editForm" role="form" novalidate [formGroup]="editForm">
  <div class="mt-lg-6">
    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.name"></label>
      <div class="col-sm-8">
        <input type="text" class="form-control" name="certificateNumber" id="field_name" formControlName="name" [readOnly]="!editMode" />
        <div *ngIf="editForm.get('name')!.invalid && (editForm.get('name')!.dirty || editForm.get('name')!.touched)">
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('name')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength"-->
          <!--                       [translateValues]="{ max: 15 }">-->
          <!--                    This field cannot be longer than 50 characters.-->
          <!--                </small>-->

          <small class="form-text text-danger" *ngIf="(editForm.get('name')?.errors)!.maxlength" jhiTranslate="entity.validation.maxlength">
            This field cannot be longer than 50 characters.
          </small>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.policyNumber"></label>
      <div class="col-sm-3">
        <input
          type="text"
          class="form-control"
          name="policyNumber"
          id="field_policyNumber"
          formControlName="policyNumber"
          [readOnly]="!editMode"
        />
        <div
          *ngIf="editForm.get('policyNumber')!.invalid && (editForm.get('policyNumber')!.dirty || editForm.get('policyNumber')!.touched)"
        >
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('policyNumber')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength" -->
          <!--                       [translateValues]="{ max: 50 }">-->
          <!--                    This field cannot be longer than 50 characters.-->
          <!--                </small>-->

          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('policyNumber')?.errors)!.maxlength"
            jhiTranslate="entity.validation.maxlength"
          >
            This field cannot be longer than 50 characters.
          </small>
        </div>
      </div>
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.policyHolder"></label>
      <div class="col-sm-3">
        <input type="text" class="form-control" name="policyHolder" id="field_policyHolder" formControlName="policyHolder" readonly />
      </div>
    </div>
    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.certificateNumber"></label>
      <div class="col-sm-3">
        <input
          type="text"
          class="form-control"
          name="certificateNumber"
          id="field_certificateNumber"
          formControlName="certificateNumber"
          [readOnly]="!editMode"
        />
        <div
          *ngIf="
            editForm.get('certificateNumber')!.invalid &&
            (editForm.get('certificateNumber')!.dirty || editForm.get('certificateNumber')!.touched)
          "
        >
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('certificateNumber')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength" [translateValues]="{ max: 50 }">-->
          <!--                    This field cannot be longer than 50 characters.-->
          <!--                </small>-->

          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('certificateNumber')?.errors)!.maxlength"
            jhiTranslate="entity.validation.maxlength"
          >
            This field cannot be longer than 50 characters.
          </small>
        </div>
      </div>
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.groupNumber"></label>
      <div class="col-sm-3">
        <input
          type="text"
          class="form-control"
          name="groupNumber"
          id="field_groupNumber"
          formControlName="groupNumber"
          [readOnly]="!editMode"
        />
        <div *ngIf="editForm.get('groupNumber')!.invalid && (editForm.get('groupNumber')!.dirty || editForm.get('groupNumber')!.touched)">
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('groupNumber')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength" [translateValues]="{ max: 50 }">-->
          <!--                    This field cannot be longer than 50 characters.-->
          <!--                </small>-->

          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('groupNumber')?.errors)!.maxlength"
            jhiTranslate="entity.validation.maxlength"
          >
            This field cannot be longer than 50 characters.
          </small>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.ehcType"></label>
      <div class="col-sm-3">
        <input type="text" class="form-control" name="groupNumber" id="field_type" formControlName="type" readonly />
      </div>
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.status"></label>
      <div class="col-sm-3" *ngIf="editMode">
        <select class="form-control" name="status" (change)="changeStatus(selectedEhc, $event)" required>
          <option *ngFor="let st of statuses" [selected]="selectedEhc!.status != null && selectedEhc!.status == st" [value]="st">
            {{ st }}
          </option>
        </select>
      </div>
      <div class="col-sm-3" *ngIf="!editMode">
        <input
          type="text"
          class="form-control"
          name="status"
          [ngModel]="selectedEhc.status"
          readonly
          [ngModelOptions]="{ standalone: true }"
        />
      </div>
    </div>
    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.expiry"></label>
      <div class="col-sm-3" *ngIf="editMode">
        <div class="input-group">
          <input
            id="field_endDate"
            type="text"
            class="form-control"
            name="endDate"
            ngbDatepicker
            #endDateDp="ngbDatepicker"
            formControlName="endDate"
          />
          <span class="input-group-append">
            <button type="button" class="btn btn-secondary" (click)="endDateDp.toggle()">
              <fa-icon icon="calendar-alt"></fa-icon>
            </button>
          </span>
        </div>
      </div>
      <div class="col-sm-3" *ngIf="!editMode">
        <input
          id="field_endDate2"
          type="text"
          class="form-control"
          name="endDate"
          formControlName="endDate"
          placeholder="YYYY-MM-DD"
          readonly
        />
      </div>
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.email"></label>
      <div class="col-sm-3">
        <input type="text" class="form-control" name="email" id="field_email" formControlName="email" [readOnly]="!editMode" />
        <div *ngIf="editForm.get('email')!.invalid && (editForm.get('email')!.dirty || editForm.get('email')!.touched)">
          <!--                    <small class="form-text text-danger"-->
          <!--                           *ngIf="editForm.get('email')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength"-->
          <!--                           [translateValues]="{ max: 50 }">-->
          <!--                        This field cannot be longer than 50 characters.-->
          <!--                    </small>-->

          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('email')?.errors)!.maxlength"
            jhiTranslate="entity.validation.maxlength"
          >
            This field cannot be longer than 50 characters.
          </small>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.phone"></label>
    <div class="col-sm-3">
      <input type="text" class="form-control" name="phone" id="field_phone" formControlName="phone" [readOnly]="!editMode" />
      <div *ngIf="editForm.get('phone')!.invalid && (editForm.get('phone')!.dirty || editForm.get('phone')!.touched)">
        <!--                <small class="form-text text-danger"-->
        <!--                       *ngIf="editForm.get('phone')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength"-->
        <!--                       [translateValues]="{ max: 12 }">-->
        <!--                    This field cannot be longer than 12 characters.-->
        <!--                </small>-->

        <small class="form-text text-danger" *ngIf="(editForm.get('phone')?.errors)!.maxlength" jhiTranslate="entity.validation.maxlength">
          This field cannot be longer than 12 characters.
        </small>
      </div>
    </div>

    <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.fax"></label>
    <div class="col-sm-3">
      <input type="text" class="form-control" name="fax" id="field_fax" formControlName="fax" [readOnly]="!editMode" />
      <div *ngIf="editForm.get('fax')!.invalid && (editForm.get('fax')!.dirty || editForm.get('fax')!.touched)">
        <!--                <small class="form-text text-danger"-->
        <!--                       *ngIf="editForm.get('fax')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength" [translateValues]="{ max: 12 }">-->
        <!--                    This field cannot be longer than 12 characters.-->
        <!--                </small>-->

        <small class="form-text text-danger" *ngIf="(editForm.get('fax')?.errors)!.maxlength" jhiTranslate="entity.validation.maxlength">
          This field cannot be longer than 12 characters.
        </small>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.note"></label>
    <div class="col-sm-8">
      <textarea type="text" class="form-control" name="note" id="field_note" formControlName="note" [readOnly]="!editMode"></textarea>
      <div *ngIf="editForm.get('note')!.invalid && (editForm.get('note')!.dirty || editForm.get('note')!.touched)">
        <!--                <small class="form-text text-danger"-->
        <!--                       *ngIf="editForm.get('note')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength" -->
        <!--                       [translateValues]="{ max: 12 }">-->
        <!--                    This field cannot be longer than 12 characters.-->
        <!--                </small>-->

        <small class="form-text text-danger" *ngIf="(editForm.get('note')?.errors)!.maxlength" jhiTranslate="entity.validation.maxlength">
          This field cannot be longer than 12 characters.
        </small>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.dependent"></label>
    <div class="col-sm-8">
      <table class="table table-borderless" *ngIf="secondaryDependents && secondaryDependents.length > 0">
        <thead>
          <tr>
            <th></th>
            <th><span jhiTranslate="ermConsoleApp.ehc.dependentName"></span></th>
            <th><span jhiTranslate="ermConsoleApp.ehc.relationship"></span></th>
            <th><span jhiTranslate="ermConsoleApp.ehc.addedToPrimary"></span></th>
            <th><span jhiTranslate="ermConsoleApp.ehc.status"></span></th>
          </tr>
          <tr *ngFor="let sec of secondaryDependents">
            <td class="text-left">
              <input
                class="largerCheckbox_20"
                type="checkbox"
                id="selectedCondition"
                (change)="addOrRemoveFromPrimary(sec, $event)"
                [checked]="isSelected(sec)"
                [disabled]="!editMode"
              />
            </td>
            <td>
              <a class="my-alert-link" (click)="gotoSecondaryEdit(sec)">{{ sec.policyHolder }}</a>
            </td>
            <td>{{ sec.relation }}</td>
            <td>{{ getSecondaryCreatedDate(sec) }}</td>
            <td *ngIf="editMode">
              <select class="form-control" name="status" (change)="changeSecondaryStatus(sec, $event)" required>
                <option *ngFor="let st of statuses" [selected]="sec!.status != null && sec!.status == st" [value]="st">{{ st }}</option>
              </select>
            </td>
            <td *ngIf="!editMode">
              {{ sec.status }}
            </td>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
  <div class="form-group row">
    <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.ehc.lastModifiedDate"></label>
    <div class="col-sm-8">
      <input
        id="field_lastModifiedDate"
        type="datetime-local"
        class="form-control"
        name="lastModifiedDate"
        formControlName="lastModifiedDate"
        readOnly
      />
    </div>
  </div>
</form>
<div class="form-group row">
  <div class="col-lg-10 text-right">
    <div class="btn-group flex-btn-group-container">
      <span jhiTranslate="ermConsoleApp.ehc.empty"></span>
      <button type="submit" (click)="save()" [disabled]="!editMode" class="btn btn-outline-primary">
        <i class="fa fa-1x fa-save"></i>
        <span jhiTranslate="ermConsoleApp.ehc.saveEhc"></span>
      </button>
    </div>
  </div>
</div>
