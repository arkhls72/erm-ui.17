<h5><span jhiTranslate="ermConsoleApp.soapNote.viewSoapNote"></span></h5>
<div *ngIf="!selectedSoapNote">
  <br />
  <div class="alert alert-warning" id="no-result">
    <span jhiTranslate="ermConsoleApp.soapNote.notFound"></span>
  </div>
</div>
<div *ngIf="selectedSoapNote">
  <form name="editForm" role="form" novalidate [formGroup]="editForm">
    <br />
    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.plan.edit"></label>
      <div class="col-sm-4">
        <label class="switch">
          <input
            class="largerCheckbox"
            [disabled]="!selectedSoapNote || !selectedSoapNote.id"
            type="checkbox"
            (change)="checkEditMode($event)"
          />
          <span class="slider round"></span> </label
        >&nbsp;
      </div>
    </div>
    <br />
    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.soapNote.name" for="field_name">Name</label>
      <div class="col-sm-8">
        <input type="text" class="form-control" name="name" id="field_name" formControlName="name" [readOnly]="!editMode" />
        <div *ngIf="editForm.get('name')!.invalid && (editForm.get('name')!.dirty || editForm.get('name')!.touched)">
          <small class="form-text text-danger" *ngIf="(editForm.get('name')?.errors)!.required" jhiTranslate="entity.validation.required">
            This field is required.
          </small>
          <small class="form-text text-danger" *ngIf="(editForm.get('name')?.errors)!.maxlength" jhiTranslate="entity.validation.maxlength">
            This field cannot be longer than 50 characters.
          </small>

          <small class="form-text text-danger" *ngIf="(editForm.get('name')?.errors)!.maxlength" jhiTranslate="entity.validation.maxlength">
            This field cannot be longer than 50 characters.
          </small>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.soapNote.subjective" for="field_subjective"
        >Subjective</label
      >
      <div class="col-sm-8">
        <textarea
          type="text"
          class="form-control"
          name="subjective"
          id="field_subjective"
          formControlName="subjective"
          [readOnly]="!editMode"
        ></textarea>
        <div *ngIf="editForm.get('subjective')!.invalid && (editForm.get('subjective')!.dirty || editForm.get('subjective')!.touched)">
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('subjective')?.errors!.required" jhiTranslate="entity.validation.required">-->
          <!--                    This field is required.-->
          <!--                </small>-->
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('subjective')?.errors!.maxlength" -->
          <!--                       jhiTranslate="entity.validation.maxlength" [translateValues]="{ max: 500 }">-->
          <!--                    This field cannot be longer than 500 characters.-->
          <!--                </small>-->

          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('subjective')?.errors)!.maxlength"
            jhiTranslate="entity.validation.maxlength"
          >
            This field cannot be longer than 500 characters.
          </small>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.soapNote.objective" for="field_objective"
        >Objective</label
      >
      <div class="col-sm-8">
        <textarea
          type="text"
          class="form-control"
          name="objective"
          id="field_objective"
          formControlName="objective"
          [readOnly]="!editMode"
        ></textarea>
        <div *ngIf="editForm.get('objective')!.invalid && (editForm.get('objective')!.dirty || editForm.get('objective')!.touched)">
          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('objective')?.errors)!.required"
            jhiTranslate="entity.validation.required"
          >
            This field is required.
          </small>
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('objective')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength" [translateValues]="{ max: 500 }">-->
          <!--                    This field cannot be longer than 500 characters.-->
          <!--                </small>-->

          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('objective')?.errors)!.maxlength"
            jhiTranslate="entity.validation.maxlength"
          >
            This field cannot be longer than 500 characters.
          </small>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.soapNote.analysis" for="field_analysis">Analysis</label>
      <div class="col-sm-8">
        <textarea
          type="text"
          class="form-control"
          name="analysis"
          id="field_analysis"
          formControlName="analysis"
          [readOnly]="!editMode"
        ></textarea>
        <div *ngIf="editForm.get('analysis')!.invalid && (editForm.get('analysis')!.dirty || editForm.get('analysis')!.touched)">
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('analysis')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength" [translateValues]="{ max: 500 }">-->
          <!--                    This field cannot be longer than 500 characters.-->
          <!--                </small>-->

          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('analysis')?.errors)!.maxlength"
            jhiTranslate="entity.validation.maxlength"
          >
            This field cannot be longer than 500 characters.
          </small>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.soapNote.evaluation" for="field_evaluation"
        >Evaluation</label
      >
      <div class="col-sm-8">
        <textarea
          type="text"
          class="form-control"
          name="evaluation"
          id="field_evaluation"
          formControlName="evaluation"
          [readOnly]="!editMode"
        ></textarea>
        <div *ngIf="editForm.get('evaluation')!.invalid && (editForm.get('evaluation')!.dirty || editForm.get('evaluation')!.touched)">
          <!--                <small class="form-text text-danger"-->
          <!--                       *ngIf="editForm.get('evaluation')?.errors!.maxlength" jhiTranslate="entity.validation.maxlength" [translateValues]="{ max: 500 }">-->
          <!--                    This field cannot be longer than 500 characters.-->
          <!--                </small>-->

          <small
            class="form-text text-danger"
            *ngIf="(editForm.get('evaluation')?.errors)!.maxlength"
            jhiTranslate="entity.validation.maxlength"
          >
            This field cannot be longer than 500 characters.
          </small>
        </div>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.soapNote.assessmentListing">assessments</label>
      <div class="col-sm-8" *ngIf="isAssessmentDelete">
        <bc-assessment-delete
          [assessment]="selectedAssessment"
          (cancelDeleteEmitter)="cancelDeleteAssessment()"
          (confirmDeleteFromSoapNoteEmitter)="confirmDeleteAssessment($event)"
        >
        </bc-assessment-delete>
      </div>
      <div class="col-sm-8" *ngIf="!isAssessmentDelete">
        <table class="table table-borderless">
          <thead>
            <tr>
              <th></th>
              <th><span jhiTranslate="ermConsoleApp.soapNote.assessName"></span></th>
              <th><span jhiTranslate="ermConsoleApp.soapNote.assessSource"></span></th>
              <th><span jhiTranslate="ermConsoleApp.soapNote.assessModified"></span></th>
              <th></th>
            </tr>
          </thead>
          <tr *ngFor="let assessment of assessments; let i = index">
            <td>{{ i + 1 }}</td>
            <td>
              <a class="my-alert-link" (click)="onSelectAssessment(assessment)">{{ assessment.name }}</a>
            </td>
            <td>
              <a class="my-alert-link">{{ assessment.sourcePain }}</a>
            </td>
            <td>
              <a class="my-alert-link">{{ assessment.lastModifiedDate?.format('YYYY-MM-DD HH:mm') }}</a>
            </td>
            <td class="text-right">
              <div class="not-selected" *ngIf="editMode">
                <i class="fa fa-2x fa-trash-o" (click)="deleteAssessment(assessment)"></i>
              </div>
              <div class="selected" *ngIf="!editMode">
                <i class="fa fa-2x fa-trash-o"></i>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.soapNote.intervention" for="field_intervention"
        >Intervention</label
      >
      <div class="col-sm-8">
        <textarea
          type="text"
          class="form-control"
          name="intervention"
          id="field_intervention"
          formControlName="intervention"
          [readOnly]="!editMode"
        ></textarea>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label text-right" jhiTranslate="ermConsoleApp.assessment.modified"></label>
      <div class="col-sm-8">
        <input type="text" class="form-control" name="lastModifiedDate" [value]="getFormatDate()" readonly />
      </div>
    </div>

    <div class="form-group row">
      <div class="col-sm-10 text-right">
        <div class="btn-group flex-btn-group-container">
          <span jhiTranslate="ermConsoleApp.ehc.empty"></span>
          <button type="submit" (click)="save()" [disabled]="editForm.invalid || !editMode" class="btn btn-outline-primary">
            <i class="fa fa-1x fa-save"></i>
            <span jhiTranslate="ermConsoleApp.assessment.saveTreat"></span>
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
